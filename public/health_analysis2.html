<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Health Analysis Form</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      margin-top: 40px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      font-size: 14px;
      font-weight: bold;
      margin-bottom: 8px;
    }

    input[type="number"],
    select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      margin-top: 5px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    button {
      width: 100%;
      padding: 12px;
      background-color: #3498db;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #2980b9;
    }

    .result-message {
      margin-top: 20px;
      padding: 10px;
      background-color: #d4edda;
      border: 1px solid #c3e6cb;
      color: #155724;
      border-radius: 4px;
    }

    #goBackButton {
      position: fixed;
      /* Fixed position */
      top: 30px;
      /* 10 pixels from the top */
      left: 10px;
      /* 10 pixels from the left */
      padding: 10px;
      /* Add padding for better visibility */
      background-color: #007BFF;
      /* Button background color */
      color: #fff;
      /* Button text color */
      border: none;
      /* Remove border */
      border-radius: 5px;
      /* Add some border-radius for a rounded appearance */
      cursor: pointer;
      /* Set cursor to pointer on hover */
      width: 10%;
      margin-bottom: 50px;
      padding: 15px;
      background-color: #3498db;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease;


    }

    #goBackButton:hover {
      background-color: #0056b3;
      /* Darker color on hover */
    }

    #resultBubble {
      position: absolute;
      /* Position the bubble relative to the container */
      top: 50%;
      /* Adjust as needed */
      right: -20px;
      /* Adjust as needed */
      background-color: #007BFF;
      color: #fff;
      padding: 10px;
      border-radius: 10px;
      display: none;
      /* Initially hide the bubble */
    }
  </style>
</head>

<body>
  <button id="goBackButton" onclick="goBack()">Go Back</button>
  <div class="container" style="margin-top: 50px;">

    <h1 class="form-title">Health Analysis</h1>

    <form id="healthAnalysisForm" class="form">
      <!-- Age -->
      <div class="grid">
        <div class="form-group">
          <label for="age">Age:</label>
          <input type="number" id="age" name="age" min="0" max="120" required />
        </div>

        <!-- Gender -->
        <div class="form-group">
          <label for="gender">Gender:</label>
          <select id="gender" name="gender" required>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
          </select>
        </div>
      </div>

      <!-- Past Medical Conditions -->
      <div class="grid">
        <div class="form-group">
          <label for="past_medical_conditions">Past Medical Conditions:</label>
          <select id="past_medical_conditions" name="past_medical_conditions" required>
            <option value="None">None</option>
            <!-- Add more options as needed -->
          </select>
        </div>

        <!-- Current Medical Condition -->
        <div class="form-group">
          <label for="current_medical_condition">Current Medical Condition:</label>
          <select id="current_medical_condition" name="current_medical_condition" required>
            <option value="None">None</option>
            <!-- Add more options as needed -->
          </select>
        </div>
      </div>

      <!-- Allergies -->
      <div class="grid">
        <div class="form-group">
          <label for="allergies">Allergies:</label>
          <select id="allergies" name="allergies" required>
            <option value="None">None</option>
            <!-- Add more options as needed -->
          </select>
        </div>

        <!-- Physical Activity Levels -->
        <div class="form-group">
          <label for="physical_activity_levels">Physical Activity Levels:</label>
          <select id="physical_activity_levels" name="physical_activity_levels" required>
            <option value="Low">Low</option>
            <option value="Moderate">Moderate</option>
            <option value="High">High</option>
          </select>
        </div>
      </div>

      <!-- Smoking Consumption -->
      <div class="grid">
        <div class="form-group">
          <label for="smoking_consumption">Smoking Consumption:</label>
          <select id="smoking_consumption" name="smoking_consumption" required>
            <option value="None">None</option>
            <option value="Low">Low</option>
            <option value="Moderate">Moderate</option>
            <option value="High">High</option>
          </select>
        </div>

        <!-- Alcohol Consumption -->
        <div class="form-group">
          <label for="alcohol_consumption">Alcohol Consumption:</label>
          <select id="alcohol_consumption" name="alcohol_consumption" required>
            <option value="None">None</option>
            <option value="Low">Low</option>
            <option value="Moderate">Moderate</option>
            <option value="High">High</option>
          </select>
        </div>
      </div>

      <!-- Mental Health History -->
      <div class="form-group">
        <label for="mental_health_history">Mental Health History:</label>
        <select id="mental_health_history" name="mental_health_history" required>
          <option value="None">None</option>
          <!-- Add more options as needed -->
        </select>
      </div>

      <!-- Height -->
      <div class="grid">
        <div class="form-group">
          <label for="height">Height (in meters):</label>
          <input type="number" id="height" name="height" step="0.01" required />
        </div>

        <!-- Weight -->
        <div class="form-group">
          <label for="weight">Weight (in kilograms):</label>
          <input type="number" id="weight" name="weight" step="0.01" required />
        </div>
      </div>

      <!-- Submit Button -->
      <button type="button" onclick="submitForm()" class="submit-button">Generate</button>
    </form>

    <div>
      <div id="analysis_results" class="result-message">
        <div id="result_content">Your health analysis result goes here.</div>
      </div>
    </div>

  </div>

  <script>
    function goBack() {
      window.history.back();
    }

    function submitForm() {
      var formData = {
        "age": parseInt(document.getElementById('age').value, 10),
        "gender": document.getElementById('gender').value,
        "past_medical_conditions": document.getElementById('past_medical_conditions').value,
        "current_medical_condition": document.getElementById('current_medical_condition').value,
        "allergies": document.getElementById('allergies').value,
        "physical_activity_levels": document.getElementById('physical_activity_levels').value,
        "smoking_consumption": document.getElementById('smoking_consumption').value,
        "alcohol_consumption": document.getElementById('alcohol_consumption').value,
        "mental_health_history": document.getElementById('mental_health_history').value,
        "height": parseInt(document.getElementById('height').value, 10),
        "weight": parseInt(document.getElementById('weight').value, 10)
      };

      // Send formData to the server
      fetch('https://health-analysis.onrender.com/Measure My Size/health_analysis', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(formData),
      })
        .then(response => response.json())
        .then(data => {
          // Update the content of the result div with the analysis_result
          document.getElementById('result_content').innerText = 'Analysis Result:\n\n' + data.analysis_result;
        })
        .catch(error => {
          console.error('Error:', error);
        });
    }

    function displayMessage(message, sender) {
      const messageContainer = document.createElement('div');
      messageContainer.classList.add(sender === 'user' ? 'user-message' : 'bot-message');
      messageContainer.textContent = message;
      chatMessages.appendChild(messageContainer);

      // Scroll to the bottom to show the latest messages
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function goBack() {
      window.history.back();
    }
  </script>
</body>

</html>